<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Med Topics</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  padding: 80px 20px 100px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Header */
.user-header {
  position: fixed;
  top: 16px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 32px);
  max-width: 500px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.2);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  border-radius: 12px;
  z-index: 1000;
}

/* Three-dot icon animation */
.hamburger {
  font-size: 18px;
  color: white;
  cursor: pointer;
  padding: 6px;
  border-radius: 4px;
  background: transparent;
  transition: transform 0.2s ease;
  margin-right: 10px; /* ⬅️ Added space between dots and user icon */
}
.hamburger:hover {
  transform: scale(1.2);
  color: #ffcc00;
}
.hamburger.open {
  transform: rotate(90deg) scale(1.2); translate(4px);
  color: #00ffcc;
}

/* Dropdown menu */
.dropdown-menu {
  position: absolute;
  top: 60px;
  left: 16px;
  background: rgba(30, 30, 30, 0.95);
  backdrop-filter: blur(12px);
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.15);
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  display: none;
  flex-direction: column;
  min-width: 200px;
  z-index: 2000;
  animation: slideDown 0.3s ease forwards;
}

.dropdown-menu a {
  color: white;
  text-decoration: none;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  font-size: 14px;
  transition: background 0.25s ease;
}
.dropdown-menu a i {
  margin-right: 10px;
  font-size: 16px;
}
.dropdown-menu a:hover {
  background: rgba(255,255,255,0.15);
}

/* Slide-down animation */
@keyframes slideDown {
  from { opacity: 0; transform: translateY(-10px) scaleY(0.95); }
  to { opacity: 1; transform: translateY(0) scaleY(1); }
}

/* User Icon & Greeting */
.user-icon {
  width: 40px;
  height: 40px;
  background: rgba(255,255,255,0.3);
  color: #fff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 700;
}
.greeting {
  color: #fff;
  font-size: 18px;
  font-weight: 600;
  margin-left: 10px;
  display: flex;
  align-items: center;
}

/* Logout/Login Button */
.logout-btn {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.2);
  color: #fff;
  border-radius: 10px;
  font-weight: 600;
  padding: 6px 12px;
  cursor: pointer;
  transition: background 0.3s;
  display: none;
}
.logout-btn:hover {
  background: rgba(255,255,255,0.3);
  color: black;
}

/* Glass Cards */
.glass-card {
  background: rgba(255,255,255,0.12);
  backdrop-filter: blur(18px);
  border-radius: 20px;
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
  padding: 30px 20px;
  width: 100%;
  max-width: 460px;
  text-align: center;
  border: 1px solid rgba(255,255,255,0.2);
  margin-top: 20px;
  display: none;
}

h2, h1 {
  color: #fff;
  font-size: 26px;
  font-weight: bold;
  margin-bottom: 20px;
}

.topic-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  justify-content: space-between;
}

.topic-card, .btn {
  flex: 0 1 calc(50% - 8px);
  background: rgba(255,255,255,0.18);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  padding: 20px;
  text-align: center;
  color: #fff;
  font-weight: 600;
  font-size: 15px;
  border: 1px solid rgba(255,255,255,0.25);
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  transition: 0.3s;
  cursor: pointer;
}
.btn {
  width: 100%;
  margin: 10px 0;
}
.topic-card:hover, .btn:hover {
  background: rgba(255,255,255,0.3);
  transform: translateY(-4px);
}

/* Bottom Navigation */
/* Bottom Navigation */
.bottom-nav {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  display: flex;
  justify-content: space-around;
  padding: 12px 0;
  border-top: 1px solid rgba(255,255,255,0.2);
}
.nav-item {
  color: #fff;
  text-align: center;
  flex: 1;
  font-size: 13px;
  cursor: pointer;
  transition: 0.3s;
}
.nav-item span {
  display: block;
  font-size: 20px;
  margin-bottom: 2px;
}
.nav-item.active {
  font-weight: bold;
  background-color: rgba(255,255,255,0.25);
  border-radius: 15px;
  padding: 5px 8px;
  margin: 0 6px;
}

@media (max-width: 500px) {
  .topic-card { flex: 1 1 100%; }
}
</style>
</head>
<body>

<!-- Header -->
<div class="user-header" id="user-header">
  <div style="display: flex; align-items: center;">
    <div class="hamburger" id="hamburger"><i class="fas fa-ellipsis-v"></i></div>
    <div class="user-icon" id="user-icon">?</div>
    <div class="greeting" id="greeting">...</div>
  </div>
  <button class="logout-btn" id="logout-btn">Login</button>
</div>

<!-- Dropdown Menu -->
<div class="dropdown-menu" id="dropdown-menu">
  <a href="https://median.co/share/noyblp#apk"><i class="fas fa-download"></i> Download App</a>
  <a href="about.html"><i class="fas fa-info-circle"></i> About Us</a>
  <a href="contact.html"><i class="fas fa-phone-alt"></i> Contact</a>
  <!-- Settings link removed -->
</div>

<!-- Sections -->
<div class="glass-card" id="pharma-section">
  <h2><i class="fas fa-stethoscope"></i> Pharmacology Topics</h2>
  <div class="topic-grid">
    <div class="topic-card" onclick="location.href='intropharm.html'"><i class="fas fa-book-medical"></i> Intro</div>
    <div class="topic-card" onclick="location.href='autonomic.html'"><i class="fas fa-brain"></i> Autonomics</div>
    <div class="topic-card" onclick="location.href='antibiotics.html'"><i class="fas fa-capsules"></i> Antibiotics</div>
    <div class="topic-card" onclick="location.href='analgesics.html'"><i class="fas fa-pills"></i> Analgesics</div>
    <div class="topic-card" onclick="location.href='cns.html'"><i class="fas fa-head-side-virus"></i> CNS Drugs</div>
  </div>
</div>

<div class="glass-card" id="patho-section">
  <h2><i class="fas fa-flask"></i> Pathology Topics</h2>
  <div class="topic-grid">
    <div class="topic-card" onclick="location.href='intropath.html'"><i class="fas fa-book"></i> Intro</div>
    <div class="topic-card" onclick="location.href='quiz_inflammation.html'"><i class="fas fa-fire"></i> Inflammation</div>
    <div class="topic-card" onclick="location.href='quiz_healing.html'"><i class="fas fa-band-aid"></i> Healing</div>
    <div class="topic-card" onclick="location.href='quiz_neoplasia.html'"><i class="fas fa-dna"></i> Neoplasia</div>
    <div class="topic-card" onclick="location.href='quiz_immunopathology.html'"><i class="fas fa-shield-virus"></i> Immuno</div>
    <div class="topic-card" onclick="location.href='quiz_cell_injury.html'"><i class="fas fa-bolt"></i> Cell Injury</div>
  </div>
</div>

<div class="glass-card" id="flashcard-section">
  <h1>What would you like to study?</h1>
  <button class="btn" onclick="location.href='pharmcard.html'"><i class="fas fa-pills"></i> Pharmacology Flashcards</button>
  <button class="btn" onclick="location.href='pathcard.html'"><i class="fas fa-heartbeat"></i> Pathology Flashcards</button>
</div>

<div class="glass-card" id="challenge-section">
  <h2><i class="fas fa-users"></i> Play with Friends</h2>
  <button class="btn" onclick="location.href='multiplayer.html'"><i class="fas fa-gamepad"></i> Play Multiplayer</button>
</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">
  <div class="nav-item" onclick="switchTab('pharma-section', this)"><span><i class="fas fa-pills"></i></span>Pharma</div>
  <div class="nav-item" onclick="switchTab('patho-section', this)"><span><i class="fas fa-flask"></i></span>Patho</div>
  <div class="nav-item" onclick="switchTab('flashcard-section', this)"><span><i class="fas fa-layer-group"></i></span>Cards</div>
  <div class="nav-item" onclick="switchTab('challenge-section', this)"><span><i class="fas fa-users"></i></span>Challenge</div>
</div>

<script>
// Animated dropdown toggle
const hamburger = document.getElementById('hamburger');
const dropdownMenu = document.getElementById('dropdown-menu');
hamburger.addEventListener('click', () => {
  const isOpen = dropdownMenu.style.display === 'flex';
  dropdownMenu.style.display = isOpen ? 'none' : 'flex';
  hamburger.classList.toggle('open', !isOpen);
});

// Close if clicked outside
document.addEventListener('click', (e) => {
  if (!hamburger.contains(e.target) && !dropdownMenu.contains(e.target)) {
    dropdownMenu.style.display = 'none';
    hamburger.classList.remove('open');
  }
});
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

const firebaseConfig = {    
  apiKey: "AIzaSyCgRJlAMQVnY5Zu7nkMPmdvS7lc5xMcJz4",    
  authDomain: "pathpharmm.firebaseapp.com",    
  projectId: "pathpharmm",    
  storageBucket: "pathpharmm.appspot.com",    
  messagingSenderId: "836525944124",    
  appId: "1:836525944124:web:9ab28aa79e9f12aeea8239"    
};    
const app = initializeApp(firebaseConfig);    
const auth = getAuth(app);    

onAuthStateChanged(auth, user => {    
  const skipped = localStorage.getItem("skip") === "true";    
  const logoutBtn = document.getElementById("logout-btn");    

  if (!user && !skipped) {    
    window.location.href = "index.html";    
    return;    
  }    

  if (user) {    
    const name = user.displayName || user.email.split('@')[0];    
    localStorage.setItem("userName", name);    
    const first = name.split(" ")[0];    
    document.getElementById("user-icon").textContent = first[0].toUpperCase();    
    document.getElementById("greeting").textContent = `Hello, ${first}`;    
    logoutBtn.textContent = "Logout";    
    logoutBtn.onclick = async () => {    
      if (!confirm("Are you sure you want to log out?")) return;    
      await signOut(auth);    
      localStorage.removeItem("skip");    
      localStorage.removeItem("userName");    
      window.location.href = "index.html";    
    };    
    logoutBtn.style.display = "block";    
  } else if (skipped) {    
    const name = localStorage.getItem("userName") || "Guest";    
    document.getElementById("user-icon").textContent = name[0].toUpperCase();    
    document.getElementById("greeting").textContent = `Welcome, ${name}`;    
    logoutBtn.textContent = "Login";    
    logoutBtn.onclick = () => {    
      localStorage.removeItem("skip");    
      window.location.href = "index.html";    
    };    
    logoutBtn.style.display = "block";    
  }    
});
</script>

<script>
const sections = ["pharma-section", "patho-section", "flashcard-section", "challenge-section"];
const navItems = document.querySelectorAll('.nav-item');

function switchTab(id, el) {    
  sections.forEach(sec => {    
    document.getElementById(sec).style.display = (sec === id ? 'block' : 'none');    
  });    
  navItems.forEach(item => item.classList.remove('active'));    
  el.classList.add('active');    
  localStorage.setItem("activeTab", id);    
}    

document.addEventListener("DOMContentLoaded", () => {    
  let activeTab = localStorage.getItem("activeTab");    
  if (!activeTab || !sections.includes(activeTab)) activeTab = "pharma-section";    
  const activeIndex = sections.indexOf(activeTab);    
  switchTab(activeTab, navItems[activeIndex]);    
});    

let startX = 0;    
document.addEventListener('touchstart', e => startX = e.touches[0].clientX);    
document.addEventListener('touchend', e => {    
  const delta = e.changedTouches[0].clientX - startX;    
  const i = sections.findIndex(id => document.getElementById(id).style.display === 'block');    
  if (Math.abs(delta) > 60) {    
    const next = delta < 0 ? (i + 1) % 4 : (i + 3) % 4;    
    switchTab(sections[next], navItems[next]);    
  }    
});
</script>

</body>
</html>